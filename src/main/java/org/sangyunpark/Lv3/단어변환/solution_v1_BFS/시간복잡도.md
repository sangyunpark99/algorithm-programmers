dfs 방식으로 푼 것과 동일하게 O(n^2)이 된다.